<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kgc.springbootymw.mapper.EasyProductMapper">
    <select id="findByName" parameterType="java.lang.String" resultType="com.kgc.springbootymw.pojo.Product">
        select * from easybuy_product
        <where>
            <if test="name !=null and name!=''">
                name like concat('%',#{name},'%')
            </if>
        </where>
    </select>
    <select id="findAll"  resultType="com.kgc.springbootymw.pojo.Product">
       SELECT
        epc1.id AS id1,
        epc1.name AS name1,
        epc2.id AS id2,
        epc2.name AS name2,
        ep.`name`,
        ep.price,
        ep.fileName,
        ep.stock
    FROM
        easybuy_product ep,
        easybuy_product_category epc1,
        easybuy_product_category epc2
    WHERE
        epc2.parentId = epc1.id
    AND
        ep.categoryLevel1Id = epc1.id
    AND
        ep.categoryLevel2Id = epc2.id
    </select>
</mapper>